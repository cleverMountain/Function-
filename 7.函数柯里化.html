<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
</head>

<body>
  <script>
    // 1.简化代码
    // 2.提高维护性
    // 3.功能单一化
    // 优点：简化代码，降低耦合，降低代码的重复性，提高代码的适应性

    /**
     *  function test (a, b, c) {
       return a + b + c
     }
     test(1)(2)(3)
     test(1, 2, 3)
     test(1, 2)(3)
     test(1)(2, 3)
    */

    function curry1(fn, ...outArgs) {
      return function (...innerArgs) {
        let args = [...outArgs, ...innerArgs]
        return fn.apply(null, args)
      }
    }
    function add10(...args) {
      return args.reduce((pre, cur) => {
        return pre += cur
      }, 0)
    }
    let add20 = curry1(add10, 1, 2)
    console.log(add20(3, 4))




    function curry2(fn, len) {
      len = len || fn.length
     
      let func = function (fn, ...outArgs) {

        return function (...innerArgs) {
          let args = [...outArgs, ...innerArgs]
          return fn.apply(null, args)
        }
      }
      // add1(1)
      return function (...args) {
        // 1 < 2
        let argLen = args.length
     
        if (argLen < len) {
          // [add, 1]
          let forMatArr = [fn, ...args]
          // curry2(func(add, 1), 1) => curry2(function ())
          return curry2(func.apply(null, forMatArr), len - argLen)
        } else {
          return fn.apply(null, [...args])
        }
      }
    }
    let add1 = curry2(add)
    let add2 = add1(1)(2)
    function add(a, b) {
      return a + b
    }
    console.log(add2)
  </script>
</body>

</html>